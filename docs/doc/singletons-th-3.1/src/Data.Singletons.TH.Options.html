<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE GeneralizedNewtypeDeriving #-}</span><span>
</span><span id="line-2"></span><span>
</span><span id="line-3"></span><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><span id="line-4"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-5"></span><span class="hs-comment">-- Module      :  Data.Singletons.TH.Options</span><span>
</span><span id="line-6"></span><span class="hs-comment">-- Copyright   :  (C) 2019 Ryan Scott</span><span>
</span><span id="line-7"></span><span class="hs-comment">-- License     :  BSD-style (see LICENSE)</span><span>
</span><span id="line-8"></span><span class="hs-comment">-- Maintainer  :  Ryan Scott</span><span>
</span><span id="line-9"></span><span class="hs-comment">-- Stability   :  experimental</span><span>
</span><span id="line-10"></span><span class="hs-comment">-- Portability :  non-portable</span><span>
</span><span id="line-11"></span><span class="hs-comment">--</span><span>
</span><span id="line-12"></span><span class="hs-comment">-- This module defines 'Options' that control finer details of how the Template</span><span>
</span><span id="line-13"></span><span class="hs-comment">-- Haskell machinery works, as well as an @mtl@-like 'OptionsMonad' class</span><span>
</span><span id="line-14"></span><span class="hs-comment">-- and an 'OptionsM' monad transformer.</span><span>
</span><span id="line-15"></span><span class="hs-comment">--</span><span>
</span><span id="line-16"></span><span class="hs-comment">----------------------------------------------------------------------------</span><span>
</span><span id="line-17"></span><span>
</span><span id="line-18"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Data.Singletons.TH.Options</span><span>
</span><span id="line-19"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-comment">-- * Options</span></span><span>
</span><span id="line-20"></span><span>    </span><span class="annot"><a href="Data.Singletons.TH.Options.html#Options"><span class="hs-identifier">Options</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Singletons.TH.Options.html#defaultOptions"><span class="hs-identifier">defaultOptions</span></a></span><span>
</span><span id="line-21"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Options record selectors</span></span><span>
</span><span id="line-22"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Singletons.TH.Options.html#genQuotedDecs"><span class="hs-identifier">genQuotedDecs</span></a></span><span>
</span><span id="line-23"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Singletons.TH.Options.html#genSingKindInsts"><span class="hs-identifier">genSingKindInsts</span></a></span><span>
</span><span id="line-24"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Singletons.TH.Options.html#promotedDataTypeOrConName"><span class="hs-identifier">promotedDataTypeOrConName</span></a></span><span>
</span><span id="line-25"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Singletons.TH.Options.html#promotedClassName"><span class="hs-identifier">promotedClassName</span></a></span><span>
</span><span id="line-26"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Singletons.TH.Options.html#promotedValueName"><span class="hs-identifier">promotedValueName</span></a></span><span>
</span><span id="line-27"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Singletons.TH.Options.html#singledDataTypeName"><span class="hs-identifier">singledDataTypeName</span></a></span><span>
</span><span id="line-28"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Singletons.TH.Options.html#singledClassName"><span class="hs-identifier">singledClassName</span></a></span><span>
</span><span id="line-29"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Singletons.TH.Options.html#singledDataConName"><span class="hs-identifier">singledDataConName</span></a></span><span>
</span><span id="line-30"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Singletons.TH.Options.html#singledValueName"><span class="hs-identifier">singledValueName</span></a></span><span>
</span><span id="line-31"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Singletons.TH.Options.html#defunctionalizedName"><span class="hs-identifier">defunctionalizedName</span></a></span><span>
</span><span id="line-32"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Derived functions over Options</span></span><span>
</span><span id="line-33"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Singletons.TH.Options.html#promotedTopLevelValueName"><span class="hs-identifier">promotedTopLevelValueName</span></a></span><span>
</span><span id="line-34"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Singletons.TH.Options.html#promotedLetBoundValueName"><span class="hs-identifier">promotedLetBoundValueName</span></a></span><span>
</span><span id="line-35"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Singletons.TH.Options.html#defunctionalizedName0"><span class="hs-identifier">defunctionalizedName0</span></a></span><span>
</span><span id="line-36"></span><span>
</span><span id="line-37"></span><span>    </span><span class="annot"><span class="hs-comment">-- * OptionsMonad</span></span><span>
</span><span id="line-38"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Singletons.TH.Options.html#OptionsMonad"><span class="hs-identifier">OptionsMonad</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Singletons.TH.Options.html#OptionsM"><span class="hs-identifier">OptionsM</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Singletons.TH.Options.html#withOptions"><span class="hs-identifier">withOptions</span></a></span><span>
</span><span id="line-39"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Applicative</span></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.IO.Class</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">MonadIO</span></span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Reader</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ReaderT</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">ask</span></span><span class="hs-special">)</span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.RWS</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">RWST</span></span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.State</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">StateT</span></span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Trans.Class</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">MonadTrans</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Writer</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">WriterT</span></span><span class="hs-special">)</span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Singletons.TH.Names.html"><span class="hs-identifier">Data.Singletons.TH.Names</span></a></span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Singletons.TH.Util.html"><span class="hs-identifier">Data.Singletons.TH.Util</span></a></span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Language.Haskell.TH.Desugar</span></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Language.Haskell.TH.Instances</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- To obtain a Quote instance for ReaderT</span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Language.Haskell.TH.Syntax</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Lift</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-53"></span><span>
</span><span id="line-54"></span><span class="hs-comment">-- | Options that control the finer details of how @singletons-th@'s Template</span><span>
</span><span id="line-55"></span><span class="hs-comment">-- Haskell machinery works.</span><span>
</span><span id="line-56"></span><span class="hs-keyword">data</span><span> </span><span id="Options"><span class="annot"><a href="Data.Singletons.TH.Options.html#Options"><span class="hs-identifier hs-var">Options</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Options"><span class="annot"><a href="Data.Singletons.TH.Options.html#Options"><span class="hs-identifier hs-var">Options</span></a></span></span><span>
</span><span id="line-57"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="genQuotedDecs"><span class="annot"><span class="annottext">Options -&gt; Bool
</span><a href="Data.Singletons.TH.Options.html#genQuotedDecs"><span class="hs-identifier hs-var hs-var">genQuotedDecs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-58"></span><span>    </span><span class="hs-comment">-- ^ If 'True', then quoted declarations will be generated alongside their</span><span>
</span><span id="line-59"></span><span>    </span><span class="hs-comment">--   promoted and singled counterparts. If 'False', then quoted</span><span>
</span><span id="line-60"></span><span>    </span><span class="hs-comment">--   declarations will be discarded.</span><span>
</span><span id="line-61"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="genSingKindInsts"><span class="annot"><span class="annottext">Options -&gt; Bool
</span><a href="Data.Singletons.TH.Options.html#genSingKindInsts"><span class="hs-identifier hs-var hs-var">genSingKindInsts</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-62"></span><span>    </span><span class="hs-comment">-- ^ If 'True', then 'SingKind' instances will be generated. If 'False',</span><span>
</span><span id="line-63"></span><span>    </span><span class="hs-comment">--   they will be omitted entirely. This can be useful in scenarios where</span><span>
</span><span id="line-64"></span><span>    </span><span class="hs-comment">--   TH-generated 'SingKind' instances do not typecheck (for instance,</span><span>
</span><span id="line-65"></span><span>    </span><span class="hs-comment">--   when generating singletons for GADTs).</span><span>
</span><span id="line-66"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="promotedDataTypeOrConName"><span class="annot"><span class="annottext">Options -&gt; Name -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#promotedDataTypeOrConName"><span class="hs-identifier hs-var hs-var">promotedDataTypeOrConName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-67"></span><span>    </span><span class="hs-comment">-- ^ Given the name of the original data type or data constructor, produces</span><span>
</span><span id="line-68"></span><span>    </span><span class="hs-comment">--   the name of the promoted equivalent. Unlike the singling-related</span><span>
</span><span id="line-69"></span><span>    </span><span class="hs-comment">--   options, in which there are separate 'singledDataTypeName' and</span><span>
</span><span id="line-70"></span><span>    </span><span class="hs-comment">--   'singledDataConName' functions, we combine the handling of promoted</span><span>
</span><span id="line-71"></span><span>    </span><span class="hs-comment">--   data types and data constructors into a single option. This is because</span><span>
</span><span id="line-72"></span><span>    </span><span class="hs-comment">--   the names of promoted data types and data constructors can be</span><span>
</span><span id="line-73"></span><span>    </span><span class="hs-comment">--   difficult to distinguish in certain contexts without expensive</span><span>
</span><span id="line-74"></span><span>    </span><span class="hs-comment">--   compile-time checks.</span><span>
</span><span id="line-75"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-76"></span><span>    </span><span class="hs-comment">--   Because of the @DataKinds@ extension, most data type and data</span><span>
</span><span id="line-77"></span><span>    </span><span class="hs-comment">--   constructor names can be used in promoted contexts without any</span><span>
</span><span id="line-78"></span><span>    </span><span class="hs-comment">--   changes. As a result, this option will act like the identity function</span><span>
</span><span id="line-79"></span><span>    </span><span class="hs-comment">--   99% of the time. There are some situations where it can be useful to</span><span>
</span><span id="line-80"></span><span>    </span><span class="hs-comment">--   override this option, however, as it can be used to promote primitive</span><span>
</span><span id="line-81"></span><span>    </span><span class="hs-comment">--   data types that do not have proper type-level equivalents, such as</span><span>
</span><span id="line-82"></span><span>    </span><span class="hs-comment">--   'Natural' and 'Text'. See the</span><span>
</span><span id="line-83"></span><span>    </span><span class="hs-comment">--   \&quot;Arrows, 'Nat', 'Symbol', and literals\&quot; section of the @singletons@</span><span>
</span><span id="line-84"></span><span>    </span><span class="hs-comment">--   @&lt;https://github.com/goldfirere/singletons/blob/master/README.md README&gt;@</span><span>
</span><span id="line-85"></span><span>    </span><span class="hs-comment">--   for more details.</span><span>
</span><span id="line-86"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="promotedClassName"><span class="annot"><span class="annottext">Options -&gt; Name -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#promotedClassName"><span class="hs-identifier hs-var hs-var">promotedClassName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-87"></span><span>    </span><span class="hs-comment">-- ^ Given the name of the original, unrefined class, produces the name of</span><span>
</span><span id="line-88"></span><span>    </span><span class="hs-comment">--   the promoted equivalent of the class.</span><span>
</span><span id="line-89"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="promotedValueName"><span class="annot"><span class="annottext">Options -&gt; Name -&gt; Maybe Uniq -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#promotedValueName"><span class="hs-identifier hs-var hs-var">promotedValueName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Uniq</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-90"></span><span>    </span><span class="hs-comment">-- ^ Given the name of the original, unrefined value, produces the name of</span><span>
</span><span id="line-91"></span><span>    </span><span class="hs-comment">--   the promoted equivalent of the value. This is used for both top-level</span><span>
</span><span id="line-92"></span><span>    </span><span class="hs-comment">--   and @let@-bound names, and the difference is encoded in the</span><span>
</span><span id="line-93"></span><span>    </span><span class="hs-comment">--   @'Maybe' 'Uniq'@ argument. If promoting a top-level name, the argument</span><span>
</span><span id="line-94"></span><span>    </span><span class="hs-comment">--   is 'Nothing'. If promoting a @let@-bound name, the argument is</span><span>
</span><span id="line-95"></span><span>    </span><span class="hs-comment">--   @Just uniq@, where @uniq@ is a globally unique number that can be used</span><span>
</span><span id="line-96"></span><span>    </span><span class="hs-comment">--   to distinguish the name from other local definitions of the same name</span><span>
</span><span id="line-97"></span><span>    </span><span class="hs-comment">--   (e.g., if two functions both use @let x = ... in x@).</span><span>
</span><span id="line-98"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="singledDataTypeName"><span class="annot"><span class="annottext">Options -&gt; Name -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#singledDataTypeName"><span class="hs-identifier hs-var hs-var">singledDataTypeName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-99"></span><span>    </span><span class="hs-comment">-- ^ Given the name of the original, unrefined data type, produces the name</span><span>
</span><span id="line-100"></span><span>    </span><span class="hs-comment">--   of the corresponding singleton type.</span><span>
</span><span id="line-101"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="singledClassName"><span class="annot"><span class="annottext">Options -&gt; Name -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#singledClassName"><span class="hs-identifier hs-var hs-var">singledClassName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-102"></span><span>    </span><span class="hs-comment">-- ^ Given the name of the original, unrefined class, produces the name of</span><span>
</span><span id="line-103"></span><span>    </span><span class="hs-comment">--   the singled equivalent of the class.</span><span>
</span><span id="line-104"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="singledDataConName"><span class="annot"><span class="annottext">Options -&gt; Name -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#singledDataConName"><span class="hs-identifier hs-var hs-var">singledDataConName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-105"></span><span>    </span><span class="hs-comment">-- ^ Given the name of the original, unrefined data constructor, produces</span><span>
</span><span id="line-106"></span><span>    </span><span class="hs-comment">--   the name of the corresponding singleton data constructor.</span><span>
</span><span id="line-107"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="singledValueName"><span class="annot"><span class="annottext">Options -&gt; Name -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#singledValueName"><span class="hs-identifier hs-var hs-var">singledValueName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-108"></span><span>    </span><span class="hs-comment">-- ^ Given the name of the original, unrefined value, produces the name of</span><span>
</span><span id="line-109"></span><span>    </span><span class="hs-comment">--   the singled equivalent of the value.</span><span>
</span><span id="line-110"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="defunctionalizedName"><span class="annot"><span class="annottext">Options -&gt; Name -&gt; Int -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#defunctionalizedName"><span class="hs-identifier hs-var hs-var">defunctionalizedName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-111"></span><span>    </span><span class="hs-comment">-- ^ Given the original name and the number of parameters it is applied to</span><span>
</span><span id="line-112"></span><span>    </span><span class="hs-comment">--   (the 'Int' argument), produces a type-level function name that can be</span><span>
</span><span id="line-113"></span><span>    </span><span class="hs-comment">--   partially applied when given the same number of parameters.</span><span>
</span><span id="line-114"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-115"></span><span>    </span><span class="hs-comment">--   Note that defunctionalization works over both term-level names</span><span>
</span><span id="line-116"></span><span>    </span><span class="hs-comment">--   (producing symbols for the promoted name) and type-level names</span><span>
</span><span id="line-117"></span><span>    </span><span class="hs-comment">--   (producing symbols directly for the name itself). As a result, this</span><span>
</span><span id="line-118"></span><span>    </span><span class="hs-comment">--   callback is used for names in both the term and type namespaces.</span><span>
</span><span id="line-119"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-120"></span><span>
</span><span id="line-121"></span><span class="hs-comment">-- | Sensible default 'Options'.</span><span>
</span><span id="line-122"></span><span class="hs-comment">--</span><span>
</span><span id="line-123"></span><span class="hs-comment">-- 'genQuotedDecs' defaults to 'True'.</span><span>
</span><span id="line-124"></span><span class="hs-comment">-- That is, quoted declarations are generated alongside their promoted and</span><span>
</span><span id="line-125"></span><span class="hs-comment">-- singled counterparts.</span><span>
</span><span id="line-126"></span><span class="hs-comment">--</span><span>
</span><span id="line-127"></span><span class="hs-comment">-- 'genSingKindInsts' defaults to 'True'.</span><span>
</span><span id="line-128"></span><span class="hs-comment">-- That is, 'SingKind' instances are generated.</span><span>
</span><span id="line-129"></span><span class="hs-comment">--</span><span>
</span><span id="line-130"></span><span class="hs-comment">-- The default behaviors for 'promotedClassName', 'promotedValueNamePrefix',</span><span>
</span><span id="line-131"></span><span class="hs-comment">-- 'singledDataTypeName', 'singledClassName', 'singledDataConName',</span><span>
</span><span id="line-132"></span><span class="hs-comment">-- 'singledValueName', and 'defunctionalizedName' are described in the</span><span>
</span><span id="line-133"></span><span class="hs-comment">-- \&quot;On names\&quot; section of the @singletons@</span><span>
</span><span id="line-134"></span><span class="hs-comment">-- @&lt;https://github.com/goldfirere/singletons/blob/master/README.md README&gt;@.</span><span>
</span><span id="line-135"></span><span class="annot"><a href="Data.Singletons.TH.Options.html#defaultOptions"><span class="hs-identifier hs-type">defaultOptions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Singletons.TH.Options.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span>
</span><span id="line-136"></span><span id="defaultOptions"><span class="annot"><span class="annottext">defaultOptions :: Options
</span><a href="Data.Singletons.TH.Options.html#defaultOptions"><span class="hs-identifier hs-var hs-var">defaultOptions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Data.Singletons.TH.Options.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span>
</span><span id="line-137"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">genQuotedDecs :: Bool
</span><a href="Data.Singletons.TH.Options.html#genQuotedDecs"><span class="hs-identifier hs-var">genQuotedDecs</span></a></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-138"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">genSingKindInsts :: Bool
</span><a href="Data.Singletons.TH.Options.html#genSingKindInsts"><span class="hs-identifier hs-var">genSingKindInsts</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-139"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">promotedDataTypeOrConName :: Name -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#promotedDataTypeOrConName"><span class="hs-identifier hs-var">promotedDataTypeOrConName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#promoteDataTypeOrConName"><span class="hs-identifier hs-var">promoteDataTypeOrConName</span></a></span><span>
</span><span id="line-140"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">promotedClassName :: Name -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#promotedClassName"><span class="hs-identifier hs-var">promotedClassName</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#promoteClassName"><span class="hs-identifier hs-var">promoteClassName</span></a></span><span>
</span><span id="line-141"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">promotedValueName :: Name -&gt; Maybe Uniq -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#promotedValueName"><span class="hs-identifier hs-var">promotedValueName</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Maybe Uniq -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#promoteValNameLhs"><span class="hs-identifier hs-var">promoteValNameLhs</span></a></span><span>
</span><span id="line-142"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">singledDataTypeName :: Name -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#singledDataTypeName"><span class="hs-identifier hs-var">singledDataTypeName</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#singTyConName"><span class="hs-identifier hs-var">singTyConName</span></a></span><span>
</span><span id="line-143"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">singledClassName :: Name -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#singledClassName"><span class="hs-identifier hs-var">singledClassName</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#singClassName"><span class="hs-identifier hs-var">singClassName</span></a></span><span>
</span><span id="line-144"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">singledDataConName :: Name -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#singledDataConName"><span class="hs-identifier hs-var">singledDataConName</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#singDataConName"><span class="hs-identifier hs-var">singDataConName</span></a></span><span>
</span><span id="line-145"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">singledValueName :: Name -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#singledValueName"><span class="hs-identifier hs-var">singledValueName</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#singValName"><span class="hs-identifier hs-var">singValName</span></a></span><span>
</span><span id="line-146"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">defunctionalizedName :: Name -&gt; Int -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#defunctionalizedName"><span class="hs-identifier hs-var">defunctionalizedName</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Int -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#promoteTySym"><span class="hs-identifier hs-var">promoteTySym</span></a></span><span>
</span><span id="line-147"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-148"></span><span>
</span><span id="line-149"></span><span class="hs-comment">-- | Given the name of the original, unrefined, top-level value, produces the</span><span>
</span><span id="line-150"></span><span class="hs-comment">-- name of the promoted equivalent of the value.</span><span>
</span><span id="line-151"></span><span class="annot"><a href="Data.Singletons.TH.Options.html#promotedTopLevelValueName"><span class="hs-identifier hs-type">promotedTopLevelValueName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Singletons.TH.Options.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-152"></span><span id="promotedTopLevelValueName"><span class="annot"><span class="annottext">promotedTopLevelValueName :: Options -&gt; Name -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#promotedTopLevelValueName"><span class="hs-identifier hs-var hs-var">promotedTopLevelValueName</span></a></span></span><span> </span><span id="local-6989586621679301778"><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679301778"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span id="local-6989586621679301777"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679301777"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Options -&gt; Name -&gt; Maybe Uniq -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#promotedValueName"><span class="hs-identifier hs-var">promotedValueName</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679301778"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679301777"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-153"></span><span>
</span><span id="line-154"></span><span class="hs-comment">-- | Given the name of the original, unrefined, @let@-bound value and its</span><span>
</span><span id="line-155"></span><span class="hs-comment">-- globally unique number, produces the name of the promoted equivalent of the</span><span>
</span><span id="line-156"></span><span class="hs-comment">-- value.</span><span>
</span><span id="line-157"></span><span class="annot"><a href="Data.Singletons.TH.Options.html#promotedLetBoundValueName"><span class="hs-identifier hs-type">promotedLetBoundValueName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Singletons.TH.Options.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Uniq</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-158"></span><span id="promotedLetBoundValueName"><span class="annot"><span class="annottext">promotedLetBoundValueName :: Options -&gt; Name -&gt; Uniq -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#promotedLetBoundValueName"><span class="hs-identifier hs-var hs-var">promotedLetBoundValueName</span></a></span></span><span> </span><span id="local-6989586621679301776"><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679301776"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span id="local-6989586621679301775"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679301775"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Options -&gt; Name -&gt; Maybe Uniq -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#promotedValueName"><span class="hs-identifier hs-var">promotedValueName</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679301776"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679301775"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span>
</span><span id="line-159"></span><span>
</span><span id="line-160"></span><span class="hs-comment">-- | Given the original name of a function (term- or type-level), produces a</span><span>
</span><span id="line-161"></span><span class="hs-comment">-- type-level function name that can be partially applied even without being</span><span>
</span><span id="line-162"></span><span class="hs-comment">-- given any arguments (i.e., @0@ arguments).</span><span>
</span><span id="line-163"></span><span class="annot"><a href="Data.Singletons.TH.Options.html#defunctionalizedName0"><span class="hs-identifier hs-type">defunctionalizedName0</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Singletons.TH.Options.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-164"></span><span id="defunctionalizedName0"><span class="annot"><span class="annottext">defunctionalizedName0 :: Options -&gt; Name -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#defunctionalizedName0"><span class="hs-identifier hs-var hs-var">defunctionalizedName0</span></a></span></span><span> </span><span id="local-6989586621679301773"><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679301773"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span id="local-6989586621679301772"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679301772"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Options -&gt; Name -&gt; Int -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#defunctionalizedName"><span class="hs-identifier hs-var">defunctionalizedName</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679301773"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679301772"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-165"></span><span>
</span><span id="line-166"></span><span class="hs-comment">-- | Class that describes monads that contain 'Options'.</span><span>
</span><span id="line-167"></span><span class="hs-keyword">class</span><span> </span><span class="annot"><span class="hs-identifier hs-type">DsMonad</span></span><span> </span><span class="annot"><a href="#local-6989586621679302017"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="OptionsMonad"><span class="annot"><a href="Data.Singletons.TH.Options.html#OptionsMonad"><span class="hs-identifier hs-var">OptionsMonad</span></a></span></span><span> </span><span id="local-6989586621679302017"><span class="annot"><a href="#local-6989586621679302017"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-168"></span><span>  </span><span id="getOptions"><span class="annot"><a href="Data.Singletons.TH.Options.html#getOptions"><span class="hs-identifier hs-type">getOptions</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679302017"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Data.Singletons.TH.Options.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span>
</span><span id="line-169"></span><span>
</span><span id="line-170"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Data.Singletons.TH.Options.html#OptionsMonad"><span class="hs-identifier hs-type">OptionsMonad</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-171"></span><span>  </span><span id="local-6989586621679301761"><span class="annot"><span class="annottext">getOptions :: Q Options
</span><a href="#local-6989586621679301761"><span class="hs-identifier hs-var hs-var hs-var hs-var">getOptions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="Data.Singletons.TH.Options.html#defaultOptions"><span class="hs-identifier hs-var">defaultOptions</span></a></span><span>
</span><span id="line-172"></span><span>
</span><span id="line-173"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679302004"><span class="annot"><a href="Data.Singletons.TH.Options.html#OptionsMonad"><span class="hs-identifier hs-type">OptionsMonad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679302004"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Singletons.TH.Options.html#OptionsMonad"><span class="hs-identifier hs-type">OptionsMonad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">DsM</span></span><span> </span><span class="annot"><a href="#local-6989586621679302004"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-174"></span><span>  </span><span id="local-6989586621679301741"><span class="annot"><span class="annottext">getOptions :: DsM m Options
</span><a href="#local-6989586621679301741"><span class="hs-identifier hs-var hs-var hs-var hs-var">getOptions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). OptionsMonad m =&gt; m Options
</span><a href="Data.Singletons.TH.Options.html#getOptions"><span class="hs-identifier hs-var">getOptions</span></a></span><span>
</span><span id="line-175"></span><span>
</span><span id="line-176"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679301993"><span id="local-6989586621679301994"><span class="hs-special">(</span><span class="annot"><a href="Data.Singletons.TH.Options.html#OptionsMonad"><span class="hs-identifier hs-type">OptionsMonad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679301994"><span class="hs-identifier hs-type">q</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621679301993"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Singletons.TH.Options.html#OptionsMonad"><span class="hs-identifier hs-type">OptionsMonad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Singletons.TH.Util.html#QWithAux"><span class="hs-identifier hs-type">QWithAux</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679301993"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679301994"><span class="hs-identifier hs-type">q</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-177"></span><span>  </span><span id="local-6989586621679301724"><span class="annot"><span class="annottext">getOptions :: QWithAux m q Options
</span><a href="#local-6989586621679301724"><span class="hs-identifier hs-var hs-var hs-var hs-var">getOptions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). OptionsMonad m =&gt; m Options
</span><a href="Data.Singletons.TH.Options.html#getOptions"><span class="hs-identifier hs-var">getOptions</span></a></span><span>
</span><span id="line-178"></span><span>
</span><span id="line-179"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679301985"><span id="local-6989586621679301986"><span class="annot"><a href="Data.Singletons.TH.Options.html#OptionsMonad"><span class="hs-identifier hs-type">OptionsMonad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679301986"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Singletons.TH.Options.html#OptionsMonad"><span class="hs-identifier hs-type">OptionsMonad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ReaderT</span></span><span> </span><span class="annot"><a href="#local-6989586621679301985"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679301986"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-180"></span><span>  </span><span id="local-6989586621679301709"><span class="annot"><span class="annottext">getOptions :: ReaderT r m Options
</span><a href="#local-6989586621679301709"><span class="hs-identifier hs-var hs-var hs-var hs-var">getOptions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). OptionsMonad m =&gt; m Options
</span><a href="Data.Singletons.TH.Options.html#getOptions"><span class="hs-identifier hs-var">getOptions</span></a></span><span>
</span><span id="line-181"></span><span>
</span><span id="line-182"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679301977"><span id="local-6989586621679301978"><span class="annot"><a href="Data.Singletons.TH.Options.html#OptionsMonad"><span class="hs-identifier hs-type">OptionsMonad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679301978"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Singletons.TH.Options.html#OptionsMonad"><span class="hs-identifier hs-type">OptionsMonad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">StateT</span></span><span> </span><span class="annot"><a href="#local-6989586621679301977"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679301978"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-183"></span><span>  </span><span id="local-6989586621679301694"><span class="annot"><span class="annottext">getOptions :: StateT s m Options
</span><a href="#local-6989586621679301694"><span class="hs-identifier hs-var hs-var hs-var hs-var">getOptions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). OptionsMonad m =&gt; m Options
</span><a href="Data.Singletons.TH.Options.html#getOptions"><span class="hs-identifier hs-var">getOptions</span></a></span><span>
</span><span id="line-184"></span><span>
</span><span id="line-185"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679301969"><span id="local-6989586621679301970"><span class="hs-special">(</span><span class="annot"><a href="Data.Singletons.TH.Options.html#OptionsMonad"><span class="hs-identifier hs-type">OptionsMonad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679301970"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621679301969"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Singletons.TH.Options.html#OptionsMonad"><span class="hs-identifier hs-type">OptionsMonad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WriterT</span></span><span> </span><span class="annot"><a href="#local-6989586621679301969"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679301970"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-186"></span><span>  </span><span id="local-6989586621679301678"><span class="annot"><span class="annottext">getOptions :: WriterT w m Options
</span><a href="#local-6989586621679301678"><span class="hs-identifier hs-var hs-var hs-var hs-var">getOptions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). OptionsMonad m =&gt; m Options
</span><a href="Data.Singletons.TH.Options.html#getOptions"><span class="hs-identifier hs-var">getOptions</span></a></span><span>
</span><span id="line-187"></span><span>
</span><span id="line-188"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679301955"><span id="local-6989586621679301956"><span id="local-6989586621679301957"><span id="local-6989586621679301958"><span class="hs-special">(</span><span class="annot"><a href="Data.Singletons.TH.Options.html#OptionsMonad"><span class="hs-identifier hs-type">OptionsMonad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679301958"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621679301957"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Singletons.TH.Options.html#OptionsMonad"><span class="hs-identifier hs-type">OptionsMonad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">RWST</span></span><span> </span><span class="annot"><a href="#local-6989586621679301956"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679301957"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679301955"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679301958"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-189"></span><span>  </span><span id="local-6989586621679301662"><span class="annot"><span class="annottext">getOptions :: RWST r w s m Options
</span><a href="#local-6989586621679301662"><span class="hs-identifier hs-var hs-var hs-var hs-var">getOptions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). OptionsMonad m =&gt; m Options
</span><a href="Data.Singletons.TH.Options.html#getOptions"><span class="hs-identifier hs-var">getOptions</span></a></span><span>
</span><span id="line-190"></span><span>
</span><span id="line-191"></span><span class="hs-comment">-- | A convenient implementation of the 'OptionsMonad' class. Use by calling</span><span>
</span><span id="line-192"></span><span class="hs-comment">-- 'withOptions'.</span><span>
</span><span id="line-193"></span><span class="hs-keyword">newtype</span><span> </span><span id="OptionsM"><span class="annot"><a href="Data.Singletons.TH.Options.html#OptionsM"><span class="hs-identifier hs-var">OptionsM</span></a></span></span><span> </span><span id="local-6989586621679301938"><span class="annot"><a href="#local-6989586621679301938"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679301850"><span class="annot"><a href="#local-6989586621679301850"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="OptionsM"><span class="annot"><a href="Data.Singletons.TH.Options.html#OptionsM"><span class="hs-identifier hs-var">OptionsM</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ReaderT</span></span><span> </span><span class="annot"><a href="Data.Singletons.TH.Options.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679301938"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679301850"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-194"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span> </span><span id="local-6989586621679301653"><span id="local-6989586621679301658"><span class="annot"><span class="annottext">forall a b. a -&gt; OptionsM m b -&gt; OptionsM m a
forall a b. (a -&gt; b) -&gt; OptionsM m a -&gt; OptionsM m b
forall (m :: * -&gt; *) a b.
Functor m =&gt;
a -&gt; OptionsM m b -&gt; OptionsM m a
forall (m :: * -&gt; *) a b.
Functor m =&gt;
(a -&gt; b) -&gt; OptionsM m a -&gt; OptionsM m b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
&lt;$ :: forall a b. a -&gt; OptionsM m b -&gt; OptionsM m a
$c&lt;$ :: forall (m :: * -&gt; *) a b.
Functor m =&gt;
a -&gt; OptionsM m b -&gt; OptionsM m a
fmap :: forall a b. (a -&gt; b) -&gt; OptionsM m a -&gt; OptionsM m b
$cfmap :: forall (m :: * -&gt; *) a b.
Functor m =&gt;
(a -&gt; b) -&gt; OptionsM m a -&gt; OptionsM m b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679301626"><span id="local-6989586621679301630"><span id="local-6989586621679301634"><span id="local-6989586621679301638"><span id="local-6989586621679301643"><span class="annot"><span class="annottext">forall a. a -&gt; OptionsM m a
forall a b. OptionsM m a -&gt; OptionsM m b -&gt; OptionsM m a
forall a b. OptionsM m a -&gt; OptionsM m b -&gt; OptionsM m b
forall a b. OptionsM m (a -&gt; b) -&gt; OptionsM m a -&gt; OptionsM m b
forall a b c.
(a -&gt; b -&gt; c) -&gt; OptionsM m a -&gt; OptionsM m b -&gt; OptionsM m c
forall (f :: * -&gt; *).
Functor f
-&gt; (forall a. a -&gt; f a)
-&gt; (forall a b. f (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b c. (a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c)
-&gt; (forall a b. f a -&gt; f b -&gt; f b)
-&gt; (forall a b. f a -&gt; f b -&gt; f a)
-&gt; Applicative f
forall {m :: * -&gt; *}. Applicative m =&gt; Functor (OptionsM m)
forall (m :: * -&gt; *) a. Applicative m =&gt; a -&gt; OptionsM m a
forall (m :: * -&gt; *) a b.
Applicative m =&gt;
OptionsM m a -&gt; OptionsM m b -&gt; OptionsM m a
forall (m :: * -&gt; *) a b.
Applicative m =&gt;
OptionsM m a -&gt; OptionsM m b -&gt; OptionsM m b
forall (m :: * -&gt; *) a b.
Applicative m =&gt;
OptionsM m (a -&gt; b) -&gt; OptionsM m a -&gt; OptionsM m b
forall (m :: * -&gt; *) a b c.
Applicative m =&gt;
(a -&gt; b -&gt; c) -&gt; OptionsM m a -&gt; OptionsM m b -&gt; OptionsM m c
&lt;* :: forall a b. OptionsM m a -&gt; OptionsM m b -&gt; OptionsM m a
$c&lt;* :: forall (m :: * -&gt; *) a b.
Applicative m =&gt;
OptionsM m a -&gt; OptionsM m b -&gt; OptionsM m a
*&gt; :: forall a b. OptionsM m a -&gt; OptionsM m b -&gt; OptionsM m b
$c*&gt; :: forall (m :: * -&gt; *) a b.
Applicative m =&gt;
OptionsM m a -&gt; OptionsM m b -&gt; OptionsM m b
liftA2 :: forall a b c.
(a -&gt; b -&gt; c) -&gt; OptionsM m a -&gt; OptionsM m b -&gt; OptionsM m c
$cliftA2 :: forall (m :: * -&gt; *) a b c.
Applicative m =&gt;
(a -&gt; b -&gt; c) -&gt; OptionsM m a -&gt; OptionsM m b -&gt; OptionsM m c
&lt;*&gt; :: forall a b. OptionsM m (a -&gt; b) -&gt; OptionsM m a -&gt; OptionsM m b
$c&lt;*&gt; :: forall (m :: * -&gt; *) a b.
Applicative m =&gt;
OptionsM m (a -&gt; b) -&gt; OptionsM m a -&gt; OptionsM m b
pure :: forall a. a -&gt; OptionsM m a
$cpure :: forall (m :: * -&gt; *) a. Applicative m =&gt; a -&gt; OptionsM m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Applicative</span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679301606"><span id="local-6989586621679301610"><span id="local-6989586621679301615"><span class="annot"><span class="annottext">forall a. a -&gt; OptionsM m a
forall a b. OptionsM m a -&gt; OptionsM m b -&gt; OptionsM m b
forall a b. OptionsM m a -&gt; (a -&gt; OptionsM m b) -&gt; OptionsM m b
forall {m :: * -&gt; *}. Monad m =&gt; Applicative (OptionsM m)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; OptionsM m a
forall (m :: * -&gt; *) a b.
Monad m =&gt;
OptionsM m a -&gt; OptionsM m b -&gt; OptionsM m b
forall (m :: * -&gt; *) a b.
Monad m =&gt;
OptionsM m a -&gt; (a -&gt; OptionsM m b) -&gt; OptionsM m b
forall (m :: * -&gt; *).
Applicative m
-&gt; (forall a b. m a -&gt; (a -&gt; m b) -&gt; m b)
-&gt; (forall a b. m a -&gt; m b -&gt; m b)
-&gt; (forall a. a -&gt; m a)
-&gt; Monad m
return :: forall a. a -&gt; OptionsM m a
$creturn :: forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; OptionsM m a
&gt;&gt; :: forall a b. OptionsM m a -&gt; OptionsM m b -&gt; OptionsM m b
$c&gt;&gt; :: forall (m :: * -&gt; *) a b.
Monad m =&gt;
OptionsM m a -&gt; OptionsM m b -&gt; OptionsM m b
&gt;&gt;= :: forall a b. OptionsM m a -&gt; (a -&gt; OptionsM m b) -&gt; OptionsM m b
$c&gt;&gt;= :: forall (m :: * -&gt; *) a b.
Monad m =&gt;
OptionsM m a -&gt; (a -&gt; OptionsM m b) -&gt; OptionsM m b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monad</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679301597"><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; OptionsM m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *).
(forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; t m a) -&gt; MonadTrans t
lift :: forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; OptionsM m a
$clift :: forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; OptionsM m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">MonadTrans</span></span></span><span>
</span><span id="line-195"></span><span>           </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679301585"><span class="annot"><span class="annottext">String -&gt; OptionsM m Name
forall (m :: * -&gt; *). Monad m -&gt; (String -&gt; m Name) -&gt; Quote m
forall {m :: * -&gt; *}. Quote m =&gt; Monad (OptionsM m)
forall (m :: * -&gt; *). Quote m =&gt; String -&gt; OptionsM m Name
newName :: String -&gt; OptionsM m Name
$cnewName :: forall (m :: * -&gt; *). Quote m =&gt; String -&gt; OptionsM m Name
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">Quote</span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679301455"><span id="local-6989586621679301459"><span id="local-6989586621679301463"><span id="local-6989586621679301467"><span id="local-6989586621679301473"><span id="local-6989586621679301481"><span id="local-6989586621679301487"><span id="local-6989586621679301491"><span id="local-6989586621679301495"><span id="local-6989586621679301499"><span id="local-6989586621679301503"><span id="local-6989586621679301507"><span id="local-6989586621679301511"><span id="local-6989586621679301515"><span id="local-6989586621679301519"><span id="local-6989586621679301523"><span id="local-6989586621679301529"><span id="local-6989586621679301535"><span id="local-6989586621679301539"><span id="local-6989586621679301543"><span id="local-6989586621679301547"><span id="local-6989586621679301551"><span id="local-6989586621679301555"><span id="local-6989586621679301559"><span id="local-6989586621679301563"><span id="local-6989586621679301568"><span class="annot"><span class="annottext">OptionsM m [Extension]
OptionsM m Loc
Bool -&gt; String -&gt; OptionsM m (Maybe Name)
Bool -&gt; String -&gt; OptionsM m ()
String -&gt; OptionsM m String
String -&gt; OptionsM m Name
String -&gt; OptionsM m ()
[Dec] -&gt; OptionsM m ()
Q () -&gt; OptionsM m ()
Name -&gt; OptionsM m [Role]
Name -&gt; OptionsM m [DecidedStrictness]
Name -&gt; OptionsM m (Maybe Fixity)
Name -&gt; OptionsM m Type
Name -&gt; OptionsM m Info
Name -&gt; [Type] -&gt; OptionsM m [Dec]
Extension -&gt; OptionsM m Bool
ForeignSrcLang -&gt; String -&gt; OptionsM m ()
Module -&gt; OptionsM m ModuleInfo
DocLoc -&gt; OptionsM m (Maybe String)
DocLoc -&gt; String -&gt; OptionsM m ()
forall a. Data a =&gt; AnnLookup -&gt; OptionsM m [a]
forall a. Typeable a =&gt; OptionsM m (Maybe a)
forall a. Typeable a =&gt; a -&gt; OptionsM m ()
forall a. IO a -&gt; OptionsM m a
forall a. OptionsM m a -&gt; OptionsM m a -&gt; OptionsM m a
forall (m :: * -&gt; *).
MonadIO m
-&gt; MonadFail m
-&gt; (String -&gt; m Name)
-&gt; (Bool -&gt; String -&gt; m ())
-&gt; (forall a. m a -&gt; m a -&gt; m a)
-&gt; (Bool -&gt; String -&gt; m (Maybe Name))
-&gt; (Name -&gt; m Info)
-&gt; (Name -&gt; m (Maybe Fixity))
-&gt; (Name -&gt; m Type)
-&gt; (Name -&gt; [Type] -&gt; m [Dec])
-&gt; (Name -&gt; m [Role])
-&gt; (forall a. Data a =&gt; AnnLookup -&gt; m [a])
-&gt; (Module -&gt; m ModuleInfo)
-&gt; (Name -&gt; m [DecidedStrictness])
-&gt; m Loc
-&gt; (forall a. IO a -&gt; m a)
-&gt; (String -&gt; m ())
-&gt; (String -&gt; m String)
-&gt; ([Dec] -&gt; m ())
-&gt; (ForeignSrcLang -&gt; String -&gt; m ())
-&gt; (Q () -&gt; m ())
-&gt; (String -&gt; m ())
-&gt; (forall a. Typeable a =&gt; m (Maybe a))
-&gt; (forall a. Typeable a =&gt; a -&gt; m ())
-&gt; (Extension -&gt; m Bool)
-&gt; m [Extension]
-&gt; (DocLoc -&gt; String -&gt; m ())
-&gt; (DocLoc -&gt; m (Maybe String))
-&gt; Quasi m
forall {m :: * -&gt; *}. Quasi m =&gt; MonadFail (OptionsM m)
forall {m :: * -&gt; *}. Quasi m =&gt; MonadIO (OptionsM m)
forall (m :: * -&gt; *). Quasi m =&gt; OptionsM m [Extension]
forall (m :: * -&gt; *). Quasi m =&gt; OptionsM m Loc
forall (m :: * -&gt; *).
Quasi m =&gt;
Bool -&gt; String -&gt; OptionsM m (Maybe Name)
forall (m :: * -&gt; *). Quasi m =&gt; Bool -&gt; String -&gt; OptionsM m ()
forall (m :: * -&gt; *). Quasi m =&gt; String -&gt; OptionsM m String
forall (m :: * -&gt; *). Quasi m =&gt; String -&gt; OptionsM m Name
forall (m :: * -&gt; *). Quasi m =&gt; String -&gt; OptionsM m ()
forall (m :: * -&gt; *). Quasi m =&gt; [Dec] -&gt; OptionsM m ()
forall (m :: * -&gt; *). Quasi m =&gt; Q () -&gt; OptionsM m ()
forall (m :: * -&gt; *). Quasi m =&gt; Name -&gt; OptionsM m [Role]
forall (m :: * -&gt; *).
Quasi m =&gt;
Name -&gt; OptionsM m [DecidedStrictness]
forall (m :: * -&gt; *). Quasi m =&gt; Name -&gt; OptionsM m (Maybe Fixity)
forall (m :: * -&gt; *). Quasi m =&gt; Name -&gt; OptionsM m Type
forall (m :: * -&gt; *). Quasi m =&gt; Name -&gt; OptionsM m Info
forall (m :: * -&gt; *). Quasi m =&gt; Name -&gt; [Type] -&gt; OptionsM m [Dec]
forall (m :: * -&gt; *). Quasi m =&gt; Extension -&gt; OptionsM m Bool
forall (m :: * -&gt; *).
Quasi m =&gt;
ForeignSrcLang -&gt; String -&gt; OptionsM m ()
forall (m :: * -&gt; *). Quasi m =&gt; Module -&gt; OptionsM m ModuleInfo
forall (m :: * -&gt; *).
Quasi m =&gt;
DocLoc -&gt; OptionsM m (Maybe String)
forall (m :: * -&gt; *). Quasi m =&gt; DocLoc -&gt; String -&gt; OptionsM m ()
forall (m :: * -&gt; *) a.
(Quasi m, Data a) =&gt;
AnnLookup -&gt; OptionsM m [a]
forall (m :: * -&gt; *) a.
(Quasi m, Typeable a) =&gt;
OptionsM m (Maybe a)
forall (m :: * -&gt; *) a. (Quasi m, Typeable a) =&gt; a -&gt; OptionsM m ()
forall (m :: * -&gt; *) a. Quasi m =&gt; IO a -&gt; OptionsM m a
forall (m :: * -&gt; *) a.
Quasi m =&gt;
OptionsM m a -&gt; OptionsM m a -&gt; OptionsM m a
qGetDoc :: DocLoc -&gt; OptionsM m (Maybe String)
$cqGetDoc :: forall (m :: * -&gt; *).
Quasi m =&gt;
DocLoc -&gt; OptionsM m (Maybe String)
qPutDoc :: DocLoc -&gt; String -&gt; OptionsM m ()
$cqPutDoc :: forall (m :: * -&gt; *). Quasi m =&gt; DocLoc -&gt; String -&gt; OptionsM m ()
qExtsEnabled :: OptionsM m [Extension]
$cqExtsEnabled :: forall (m :: * -&gt; *). Quasi m =&gt; OptionsM m [Extension]
qIsExtEnabled :: Extension -&gt; OptionsM m Bool
$cqIsExtEnabled :: forall (m :: * -&gt; *). Quasi m =&gt; Extension -&gt; OptionsM m Bool
qPutQ :: forall a. Typeable a =&gt; a -&gt; OptionsM m ()
$cqPutQ :: forall (m :: * -&gt; *) a. (Quasi m, Typeable a) =&gt; a -&gt; OptionsM m ()
qGetQ :: forall a. Typeable a =&gt; OptionsM m (Maybe a)
$cqGetQ :: forall (m :: * -&gt; *) a.
(Quasi m, Typeable a) =&gt;
OptionsM m (Maybe a)
qAddCorePlugin :: String -&gt; OptionsM m ()
$cqAddCorePlugin :: forall (m :: * -&gt; *). Quasi m =&gt; String -&gt; OptionsM m ()
qAddModFinalizer :: Q () -&gt; OptionsM m ()
$cqAddModFinalizer :: forall (m :: * -&gt; *). Quasi m =&gt; Q () -&gt; OptionsM m ()
qAddForeignFilePath :: ForeignSrcLang -&gt; String -&gt; OptionsM m ()
$cqAddForeignFilePath :: forall (m :: * -&gt; *).
Quasi m =&gt;
ForeignSrcLang -&gt; String -&gt; OptionsM m ()
qAddTopDecls :: [Dec] -&gt; OptionsM m ()
$cqAddTopDecls :: forall (m :: * -&gt; *). Quasi m =&gt; [Dec] -&gt; OptionsM m ()
qAddTempFile :: String -&gt; OptionsM m String
$cqAddTempFile :: forall (m :: * -&gt; *). Quasi m =&gt; String -&gt; OptionsM m String
qAddDependentFile :: String -&gt; OptionsM m ()
$cqAddDependentFile :: forall (m :: * -&gt; *). Quasi m =&gt; String -&gt; OptionsM m ()
qRunIO :: forall a. IO a -&gt; OptionsM m a
$cqRunIO :: forall (m :: * -&gt; *) a. Quasi m =&gt; IO a -&gt; OptionsM m a
qLocation :: OptionsM m Loc
$cqLocation :: forall (m :: * -&gt; *). Quasi m =&gt; OptionsM m Loc
qReifyConStrictness :: Name -&gt; OptionsM m [DecidedStrictness]
$cqReifyConStrictness :: forall (m :: * -&gt; *).
Quasi m =&gt;
Name -&gt; OptionsM m [DecidedStrictness]
qReifyModule :: Module -&gt; OptionsM m ModuleInfo
$cqReifyModule :: forall (m :: * -&gt; *). Quasi m =&gt; Module -&gt; OptionsM m ModuleInfo
qReifyAnnotations :: forall a. Data a =&gt; AnnLookup -&gt; OptionsM m [a]
$cqReifyAnnotations :: forall (m :: * -&gt; *) a.
(Quasi m, Data a) =&gt;
AnnLookup -&gt; OptionsM m [a]
qReifyRoles :: Name -&gt; OptionsM m [Role]
$cqReifyRoles :: forall (m :: * -&gt; *). Quasi m =&gt; Name -&gt; OptionsM m [Role]
qReifyInstances :: Name -&gt; [Type] -&gt; OptionsM m [Dec]
$cqReifyInstances :: forall (m :: * -&gt; *). Quasi m =&gt; Name -&gt; [Type] -&gt; OptionsM m [Dec]
qReifyType :: Name -&gt; OptionsM m Type
$cqReifyType :: forall (m :: * -&gt; *). Quasi m =&gt; Name -&gt; OptionsM m Type
qReifyFixity :: Name -&gt; OptionsM m (Maybe Fixity)
$cqReifyFixity :: forall (m :: * -&gt; *). Quasi m =&gt; Name -&gt; OptionsM m (Maybe Fixity)
qReify :: Name -&gt; OptionsM m Info
$cqReify :: forall (m :: * -&gt; *). Quasi m =&gt; Name -&gt; OptionsM m Info
qLookupName :: Bool -&gt; String -&gt; OptionsM m (Maybe Name)
$cqLookupName :: forall (m :: * -&gt; *).
Quasi m =&gt;
Bool -&gt; String -&gt; OptionsM m (Maybe Name)
qRecover :: forall a. OptionsM m a -&gt; OptionsM m a -&gt; OptionsM m a
$cqRecover :: forall (m :: * -&gt; *) a.
Quasi m =&gt;
OptionsM m a -&gt; OptionsM m a -&gt; OptionsM m a
qReport :: Bool -&gt; String -&gt; OptionsM m ()
$cqReport :: forall (m :: * -&gt; *). Quasi m =&gt; Bool -&gt; String -&gt; OptionsM m ()
qNewName :: String -&gt; OptionsM m Name
$cqNewName :: forall (m :: * -&gt; *). Quasi m =&gt; String -&gt; OptionsM m Name
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Quasi</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679301445"><span class="annot"><span class="annottext">forall a. String -&gt; OptionsM m a
forall (m :: * -&gt; *).
Monad m -&gt; (forall a. String -&gt; m a) -&gt; MonadFail m
forall {m :: * -&gt; *}. MonadFail m =&gt; Monad (OptionsM m)
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; OptionsM m a
fail :: forall a. String -&gt; OptionsM m a
$cfail :: forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; OptionsM m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadFail</span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679301434"><span class="annot"><span class="annottext">forall a. IO a -&gt; OptionsM m a
forall (m :: * -&gt; *).
Monad m -&gt; (forall a. IO a -&gt; m a) -&gt; MonadIO m
forall {m :: * -&gt; *}. MonadIO m =&gt; Monad (OptionsM m)
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; OptionsM m a
liftIO :: forall a. IO a -&gt; OptionsM m a
$cliftIO :: forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; OptionsM m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadIO</span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679301421"><span class="annot"><span class="annottext">OptionsM m [Dec]
forall (m :: * -&gt; *).
Quasi m -&gt; MonadFail m -&gt; m [Dec] -&gt; DsMonad m
forall {m :: * -&gt; *}. DsMonad m =&gt; MonadFail (OptionsM m)
forall {m :: * -&gt; *}. DsMonad m =&gt; Quasi (OptionsM m)
forall (m :: * -&gt; *). DsMonad m =&gt; OptionsM m [Dec]
localDeclarations :: OptionsM m [Dec]
$clocalDeclarations :: forall (m :: * -&gt; *). DsMonad m =&gt; OptionsM m [Dec]
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">DsMonad</span></span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-196"></span><span>
</span><span id="line-197"></span><span class="hs-comment">-- | Turn any 'DsMonad' into an 'OptionsMonad'.</span><span>
</span><span id="line-198"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679301854"><span class="annot"><span class="hs-identifier hs-type">DsMonad</span></span><span> </span><span class="annot"><a href="#local-6989586621679301854"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Singletons.TH.Options.html#OptionsMonad"><span class="hs-identifier hs-type">OptionsMonad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Singletons.TH.Options.html#OptionsM"><span class="hs-identifier hs-type">OptionsM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679301854"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-199"></span><span>  </span><span id="local-6989586621679301406"><span class="annot"><span class="annottext">getOptions :: OptionsM m Options
</span><a href="#local-6989586621679301406"><span class="hs-identifier hs-var hs-var hs-var hs-var">getOptions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. ReaderT Options m a -&gt; OptionsM m a
</span><a href="Data.Singletons.TH.Options.html#OptionsM"><span class="hs-identifier hs-var">OptionsM</span></a></span><span> </span><span class="annot"><span class="annottext">forall r (m :: * -&gt; *). MonadReader r m =&gt; m r
</span><span class="hs-identifier hs-var">ask</span></span><span>
</span><span id="line-200"></span><span>
</span><span id="line-201"></span><span class="hs-comment">-- | Declare the 'Options' that a TH computation should use.</span><span>
</span><span id="line-202"></span><span id="local-6989586621679301846"><span id="local-6989586621679301847"><span class="annot"><a href="Data.Singletons.TH.Options.html#withOptions"><span class="hs-identifier hs-type">withOptions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Singletons.TH.Options.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Singletons.TH.Options.html#OptionsM"><span class="hs-identifier hs-type">OptionsM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679301847"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679301846"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679301847"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679301846"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-203"></span><span id="withOptions"><span class="annot"><span class="annottext">withOptions :: forall (m :: * -&gt; *) a. Options -&gt; OptionsM m a -&gt; m a
</span><a href="Data.Singletons.TH.Options.html#withOptions"><span class="hs-identifier hs-var hs-var">withOptions</span></a></span></span><span> </span><span id="local-6989586621679301405"><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679301405"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Singletons.TH.Options.html#OptionsM"><span class="hs-identifier hs-type">OptionsM</span></a></span><span> </span><span id="local-6989586621679301404"><span class="annot"><span class="annottext">ReaderT Options m a
</span><a href="#local-6989586621679301404"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall r (m :: * -&gt; *) a. ReaderT r m a -&gt; r -&gt; m a
</span><span class="hs-identifier hs-var">runReaderT</span></span><span> </span><span class="annot"><span class="annottext">ReaderT Options m a
</span><a href="#local-6989586621679301404"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679301405"><span class="hs-identifier hs-var">opts</span></a></span><span>
</span><span id="line-204"></span><span>
</span><span id="line-205"></span><span class="hs-comment">-- Used when a value name appears in a pattern context.</span><span>
</span><span id="line-206"></span><span class="hs-comment">-- Works only for proper variables (lower-case names).</span><span>
</span><span id="line-207"></span><span class="hs-comment">--</span><span>
</span><span id="line-208"></span><span class="hs-comment">-- If the Maybe Uniq argument is Nothing, then the name is top-level (and</span><span>
</span><span id="line-209"></span><span class="hs-comment">-- thus globally unique on its own).</span><span>
</span><span id="line-210"></span><span class="hs-comment">-- If the Maybe Uniq argument is `Just uniq`, then the name is let-bound and</span><span>
</span><span id="line-211"></span><span class="hs-comment">-- should use `uniq` to make the promoted name globally unique.</span><span>
</span><span id="line-212"></span><span class="annot"><a href="Data.Singletons.TH.Options.html#promoteValNameLhs"><span class="hs-identifier hs-type">promoteValNameLhs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Uniq</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-213"></span><span id="promoteValNameLhs"><span class="annot"><span class="annottext">promoteValNameLhs :: Name -&gt; Maybe Uniq -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#promoteValNameLhs"><span class="hs-identifier hs-var hs-var">promoteValNameLhs</span></a></span></span><span> </span><span id="local-6989586621679301402"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679301402"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679301401"><span class="annot"><span class="annottext">Maybe Uniq
</span><a href="#local-6989586621679301401"><span class="hs-identifier hs-var">mb_let_uniq</span></a></span></span><span>
</span><span id="line-214"></span><span>    </span><span class="hs-comment">-- We can't promote promote idenitifers beginning with underscores to</span><span>
</span><span id="line-215"></span><span>    </span><span class="hs-comment">-- type names, so we work around the issue by prepending &quot;US&quot; at the</span><span>
</span><span id="line-216"></span><span>    </span><span class="hs-comment">-- front of the name (#229).</span><span>
</span><span id="line-217"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679301400"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679301400"><span class="hs-identifier hs-var">us</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679301399"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679301399"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; Maybe (String, String)
</span><a href="Data.Singletons.TH.Names.html#splitUnderscores"><span class="hs-identifier hs-var">splitUnderscores</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; String
</span><span class="hs-identifier hs-var">nameBase</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679301402"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-218"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Name
</span><span class="hs-identifier hs-var">mkName</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679301396"><span class="hs-identifier hs-var">alpha</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;US&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679301400"><span class="hs-identifier hs-var">us</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679301399"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-219"></span><span>
</span><span id="line-220"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-221"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Name
</span><span class="hs-identifier hs-var">mkName</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(String, String) -&gt; Name -&gt; String
</span><a href="Data.Singletons.TH.Util.html#toUpcaseStr"><span class="hs-identifier hs-var">toUpcaseStr</span></a></span><span> </span><span class="annot"><span class="annottext">(String, String)
</span><a href="#local-6989586621679301394"><span class="hs-identifier hs-var">pres</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679301402"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-222"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-223"></span><span>    </span><span id="local-6989586621679301394"><span class="annot"><span class="annottext">pres :: (String, String)
</span><a href="#local-6989586621679301394"><span class="hs-identifier hs-var hs-var">pres</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">(String, String)
</span><a href="Data.Singletons.TH.Util.html#noPrefix"><span class="hs-identifier hs-var">noPrefix</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; String -&gt; Uniq -&gt; (String, String)
</span><a href="Data.Singletons.TH.Util.html#uniquePrefixes"><span class="hs-identifier hs-var">uniquePrefixes</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Let&quot;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&lt;&lt;&lt;&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Uniq
</span><a href="#local-6989586621679301401"><span class="hs-identifier hs-var">mb_let_uniq</span></a></span><span>
</span><span id="line-224"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679301396"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679301396"><span class="hs-identifier hs-var">alpha</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(String, String)
</span><a href="#local-6989586621679301394"><span class="hs-identifier hs-var">pres</span></a></span><span>
</span><span id="line-225"></span><span>
</span><span id="line-226"></span><span class="hs-comment">-- generates type-level symbol for a given name. Int parameter represents</span><span>
</span><span id="line-227"></span><span class="hs-comment">-- saturation: 0 - no parameters passed to the symbol, 1 - one parameter</span><span>
</span><span id="line-228"></span><span class="hs-comment">-- passed to the symbol, and so on. Works on both promoted and unpromoted</span><span>
</span><span id="line-229"></span><span class="hs-comment">-- names.</span><span>
</span><span id="line-230"></span><span class="annot"><a href="Data.Singletons.TH.Options.html#promoteTySym"><span class="hs-identifier hs-type">promoteTySym</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-231"></span><span id="promoteTySym"><span class="annot"><span class="annottext">promoteTySym :: Name -&gt; Int -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#promoteTySym"><span class="hs-identifier hs-var hs-var">promoteTySym</span></a></span></span><span> </span><span id="local-6989586621679301390"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679301390"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679301389"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679301389"><span class="hs-identifier hs-var">sat</span></a></span></span><span>
</span><span id="line-232"></span><span>      </span><span class="hs-comment">-- We can't promote promote idenitifers beginning with underscores to</span><span>
</span><span id="line-233"></span><span>      </span><span class="hs-comment">-- type names, so we work around the issue by prepending &quot;US&quot; at the</span><span>
</span><span id="line-234"></span><span>      </span><span class="hs-comment">-- front of the name (#229).</span><span>
</span><span id="line-235"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679301388"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679301388"><span class="hs-identifier hs-var">us</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679301387"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679301387"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; Maybe (String, String)
</span><a href="Data.Singletons.TH.Names.html#splitUnderscores"><span class="hs-identifier hs-var">splitUnderscores</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; String
</span><span class="hs-identifier hs-var">nameBase</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679301390"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-236"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name
</span><a href="#local-6989586621679301386"><span class="hs-identifier hs-var">default_case</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Name
</span><span class="hs-identifier hs-var">mkName</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;US&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679301388"><span class="hs-identifier hs-var">us</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679301387"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-237"></span><span>
</span><span id="line-238"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679301390"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Singletons.TH.Names.html#nilName"><span class="hs-identifier hs-var">nilName</span></a></span><span>
</span><span id="line-239"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Name
</span><span class="hs-identifier hs-var">mkName</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;NilSym&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679301389"><span class="hs-identifier hs-var">sat</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-240"></span><span>
</span><span id="line-241"></span><span>       </span><span class="hs-comment">-- Treat unboxed tuples like tuples.</span><span>
</span><span id="line-242"></span><span>       </span><span class="hs-comment">-- See Note [Promoting and singling unboxed tuples].</span><span>
</span><span id="line-243"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679301383"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679301383"><span class="hs-identifier hs-var">degree</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Maybe Int
</span><span class="hs-identifier hs-var">tupleNameDegree_maybe</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679301390"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span>
</span><span id="line-244"></span><span>                     </span><span class="annot"><span class="annottext">Name -&gt; Maybe Int
</span><span class="hs-identifier hs-var">unboxedTupleNameDegree_maybe</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679301390"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-245"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Name
</span><span class="hs-identifier hs-var">mkName</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Tuple&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679301383"><span class="hs-identifier hs-var">degree</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Sym&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679301389"><span class="hs-identifier hs-var">sat</span></a></span><span>
</span><span id="line-246"></span><span>
</span><span id="line-247"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-248"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name
</span><a href="#local-6989586621679301386"><span class="hs-identifier hs-var">default_case</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679301390"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-249"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-250"></span><span>    </span><span class="annot"><a href="#local-6989586621679301386"><span class="hs-identifier hs-type">default_case</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-251"></span><span>    </span><span id="local-6989586621679301386"><span class="annot"><span class="annottext">default_case :: Name -&gt; Name
</span><a href="#local-6989586621679301386"><span class="hs-identifier hs-var hs-var">default_case</span></a></span></span><span> </span><span id="local-6989586621679301379"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679301379"><span class="hs-identifier hs-var">name'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-252"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679301378"><span class="annot"><span class="annottext">capped :: String
</span><a href="#local-6989586621679301378"><span class="hs-identifier hs-var hs-var">capped</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(String, String) -&gt; Name -&gt; String
</span><a href="Data.Singletons.TH.Util.html#toUpcaseStr"><span class="hs-identifier hs-var">toUpcaseStr</span></a></span><span> </span><span class="annot"><span class="annottext">(String, String)
</span><a href="Data.Singletons.TH.Util.html#noPrefix"><span class="hs-identifier hs-var">noPrefix</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679301379"><span class="hs-identifier hs-var">name'</span></a></span><span> </span><span class="hs-keyword">in</span><span>
</span><span id="line-253"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="Data.Singletons.TH.Util.html#isHsLetter"><span class="hs-identifier hs-var">isHsLetter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. [a] -&gt; a
</span><span class="hs-identifier hs-var">head</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679301378"><span class="hs-identifier hs-var">capped</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-254"></span><span>      </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String -&gt; Name
</span><span class="hs-identifier hs-var">mkName</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679301378"><span class="hs-identifier hs-var">capped</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Sym&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679301389"><span class="hs-identifier hs-var">sat</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-255"></span><span>      </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">String -&gt; Name
</span><span class="hs-identifier hs-var">mkName</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679301378"><span class="hs-identifier hs-var">capped</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;@#@&quot;</span></span><span> </span><span class="hs-comment">-- See Note [Defunctionalization symbol suffixes]</span><span>
</span><span id="line-256"></span><span>                          </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Int -&gt; a -&gt; [a]
</span><span class="hs-identifier hs-var">replicate</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679301389"><span class="hs-identifier hs-var">sat</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'$'</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-257"></span><span>
</span><span id="line-258"></span><span class="annot"><a href="Data.Singletons.TH.Options.html#promoteClassName"><span class="hs-identifier hs-type">promoteClassName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-259"></span><span id="promoteClassName"><span class="annot"><span class="annottext">promoteClassName :: Name -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#promoteClassName"><span class="hs-identifier hs-var hs-var">promoteClassName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; Name -&gt; Name
</span><a href="Data.Singletons.TH.Util.html#prefixName"><span class="hs-identifier hs-var">prefixName</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;P&quot;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;#&quot;</span></span><span>
</span><span id="line-260"></span><span>
</span><span id="line-261"></span><span class="annot"><a href="Data.Singletons.TH.Options.html#promoteDataTypeOrConName"><span class="hs-identifier hs-type">promoteDataTypeOrConName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-262"></span><span id="promoteDataTypeOrConName"><span class="annot"><span class="annottext">promoteDataTypeOrConName :: Name -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#promoteDataTypeOrConName"><span class="hs-identifier hs-var hs-var">promoteDataTypeOrConName</span></a></span></span><span> </span><span id="local-6989586621679301372"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679301372"><span class="hs-identifier hs-var">nm</span></a></span></span><span>
</span><span id="line-263"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Name -&gt; String
</span><span class="hs-identifier hs-var">nameBase</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679301372"><span class="hs-identifier hs-var">nm</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; String
</span><span class="hs-identifier hs-var">nameBase</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Singletons.TH.Names.html#repName"><span class="hs-identifier hs-var">repName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier hs-var">typeKindName</span></span><span>
</span><span id="line-264"></span><span>    </span><span class="hs-comment">-- See Note [Promoting and singling unboxed tuples]</span><span>
</span><span id="line-265"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679301369"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679301369"><span class="hs-identifier hs-var">degree</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Maybe Int
</span><span class="hs-identifier hs-var">unboxedTupleNameDegree_maybe</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679301372"><span class="hs-identifier hs-var">nm</span></a></span><span>
</span><span id="line-266"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Bool
</span><a href="#local-6989586621679301368"><span class="hs-identifier hs-var">isDataName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679301372"><span class="hs-identifier hs-var">nm</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Name
</span><span class="hs-identifier hs-var">tupleDataName</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679301369"><span class="hs-identifier hs-var">degree</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Name
</span><span class="hs-identifier hs-var">tupleTypeName</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679301369"><span class="hs-identifier hs-var">degree</span></a></span><span>
</span><span id="line-267"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679301372"><span class="hs-identifier hs-var">nm</span></a></span><span>
</span><span id="line-268"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-269"></span><span>    </span><span class="hs-comment">-- Is this name a data constructor name? A 'False' answer means &quot;unsure&quot;.</span><span>
</span><span id="line-270"></span><span>    </span><span class="annot"><a href="#local-6989586621679301368"><span class="hs-identifier hs-type">isDataName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-271"></span><span>    </span><span id="local-6989586621679301368"><span class="annot"><span class="annottext">isDataName :: Name -&gt; Bool
</span><a href="#local-6989586621679301368"><span class="hs-identifier hs-var hs-var">isDataName</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="annot"><span class="annottext">OccName
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NameG</span></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><span class="hs-identifier hs-var">DataName</span></span><span> </span><span class="annot"><span class="annottext">PkgName
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ModName
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-272"></span><span>    </span><span class="annot"><a href="#local-6989586621679301368"><span class="hs-identifier hs-var">isDataName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span>                             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-273"></span><span>
</span><span id="line-274"></span><span class="hs-comment">-- Singletons</span><span>
</span><span id="line-275"></span><span>
</span><span id="line-276"></span><span class="annot"><a href="Data.Singletons.TH.Options.html#singDataConName"><span class="hs-identifier hs-type">singDataConName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-277"></span><span id="singDataConName"><span class="annot"><span class="annottext">singDataConName :: Name -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#singDataConName"><span class="hs-identifier hs-var hs-var">singDataConName</span></a></span></span><span> </span><span id="local-6989586621679301362"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679301362"><span class="hs-identifier hs-var">nm</span></a></span></span><span>
</span><span id="line-278"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679301362"><span class="hs-identifier hs-var">nm</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Singletons.TH.Names.html#nilName"><span class="hs-identifier hs-var">nilName</span></a></span><span>                                  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Name
</span><span class="hs-identifier hs-var">mkName</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;SNil&quot;</span></span><span>
</span><span id="line-279"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679301362"><span class="hs-identifier hs-var">nm</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Singletons.TH.Names.html#consName"><span class="hs-identifier hs-var">consName</span></a></span><span>                                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Name
</span><span class="hs-identifier hs-var">mkName</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;SCons&quot;</span></span><span>
</span><span id="line-280"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679301360"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679301360"><span class="hs-identifier hs-var">degree</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Maybe Int
</span><span class="hs-identifier hs-var">tupleNameDegree_maybe</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679301362"><span class="hs-identifier hs-var">nm</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#mkTupleName"><span class="hs-identifier hs-var">mkTupleName</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679301360"><span class="hs-identifier hs-var">degree</span></a></span><span>
</span><span id="line-281"></span><span>    </span><span class="hs-comment">-- See Note [Promoting and singling unboxed tuples]</span><span>
</span><span id="line-282"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679301358"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679301358"><span class="hs-identifier hs-var">degree</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Maybe Int
</span><span class="hs-identifier hs-var">unboxedTupleNameDegree_maybe</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679301362"><span class="hs-identifier hs-var">nm</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#mkTupleName"><span class="hs-identifier hs-var">mkTupleName</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679301358"><span class="hs-identifier hs-var">degree</span></a></span><span>
</span><span id="line-283"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>                                      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; Name -&gt; Name
</span><a href="Data.Singletons.TH.Util.html#prefixConName"><span class="hs-identifier hs-var">prefixConName</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;S&quot;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;%&quot;</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679301362"><span class="hs-identifier hs-var">nm</span></a></span><span>
</span><span id="line-284"></span><span>
</span><span id="line-285"></span><span class="annot"><a href="Data.Singletons.TH.Options.html#singTyConName"><span class="hs-identifier hs-type">singTyConName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-286"></span><span id="singTyConName"><span class="annot"><span class="annottext">singTyConName :: Name -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#singTyConName"><span class="hs-identifier hs-var hs-var">singTyConName</span></a></span></span><span> </span><span id="local-6989586621679301356"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679301356"><span class="hs-identifier hs-var">name</span></a></span></span><span>
</span><span id="line-287"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679301356"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Data.Singletons.TH.Names.html#listName"><span class="hs-identifier hs-var">listName</span></a></span><span>                                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Name
</span><span class="hs-identifier hs-var">mkName</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;SList&quot;</span></span><span>
</span><span id="line-288"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679301354"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679301354"><span class="hs-identifier hs-var">degree</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Maybe Int
</span><span class="hs-identifier hs-var">tupleNameDegree_maybe</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679301356"><span class="hs-identifier hs-var">name</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#mkTupleName"><span class="hs-identifier hs-var">mkTupleName</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679301354"><span class="hs-identifier hs-var">degree</span></a></span><span>
</span><span id="line-289"></span><span>    </span><span class="hs-comment">-- See Note [Promoting and singling unboxed tuples]</span><span>
</span><span id="line-290"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679301353"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679301353"><span class="hs-identifier hs-var">degree</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Maybe Int
</span><span class="hs-identifier hs-var">unboxedTupleNameDegree_maybe</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679301356"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#mkTupleName"><span class="hs-identifier hs-var">mkTupleName</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679301353"><span class="hs-identifier hs-var">degree</span></a></span><span>
</span><span id="line-291"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>                                        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; Name -&gt; Name
</span><a href="Data.Singletons.TH.Util.html#prefixName"><span class="hs-identifier hs-var">prefixName</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;S&quot;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;%&quot;</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679301356"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-292"></span><span>
</span><span id="line-293"></span><span class="annot"><a href="Data.Singletons.TH.Options.html#mkTupleName"><span class="hs-identifier hs-type">mkTupleName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-294"></span><span id="mkTupleName"><span class="annot"><span class="annottext">mkTupleName :: Int -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#mkTupleName"><span class="hs-identifier hs-var hs-var">mkTupleName</span></a></span></span><span> </span><span id="local-6989586621679301352"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679301352"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Name
</span><span class="hs-identifier hs-var">mkName</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;STuple&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679301352"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-295"></span><span>
</span><span id="line-296"></span><span class="annot"><a href="Data.Singletons.TH.Options.html#singClassName"><span class="hs-identifier hs-type">singClassName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-297"></span><span id="singClassName"><span class="annot"><span class="annottext">singClassName :: Name -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#singClassName"><span class="hs-identifier hs-var hs-var">singClassName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#singTyConName"><span class="hs-identifier hs-var">singTyConName</span></a></span><span>
</span><span id="line-298"></span><span>
</span><span id="line-299"></span><span class="annot"><a href="Data.Singletons.TH.Options.html#singValName"><span class="hs-identifier hs-type">singValName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-300"></span><span id="singValName"><span class="annot"><span class="annottext">singValName :: Name -&gt; Name
</span><a href="Data.Singletons.TH.Options.html#singValName"><span class="hs-identifier hs-var hs-var">singValName</span></a></span></span><span> </span><span id="local-6989586621679301351"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679301351"><span class="hs-identifier hs-var">n</span></a></span></span><span>
</span><span id="line-301"></span><span>     </span><span class="hs-comment">-- Push the 's' past the underscores, as this lets us avoid some unused</span><span>
</span><span id="line-302"></span><span>     </span><span class="hs-comment">-- variable warnings (#229).</span><span>
</span><span id="line-303"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679301350"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679301350"><span class="hs-identifier hs-var">us</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679301349"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679301349"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; Maybe (String, String)
</span><a href="Data.Singletons.TH.Names.html#splitUnderscores"><span class="hs-identifier hs-var">splitUnderscores</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; String
</span><span class="hs-identifier hs-var">nameBase</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679301351"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-304"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; Name -&gt; Name
</span><a href="Data.Singletons.TH.Util.html#prefixName"><span class="hs-identifier hs-var">prefixName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679301350"><span class="hs-identifier hs-var">us</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;s&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;%&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Name
</span><span class="hs-identifier hs-var">mkName</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679301349"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-305"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-306"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; Name -&gt; Name
</span><a href="Data.Singletons.TH.Util.html#prefixName"><span class="hs-identifier hs-var">prefixName</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;s&quot;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;%&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name
</span><a href="Data.Singletons.TH.Util.html#upcase"><span class="hs-identifier hs-var">upcase</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679301351"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-307"></span><span>
</span><span id="line-308"></span><span class="hs-comment">{-
Note [Promoting and singling unboxed tuples]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Unfortunately, today's GHC is not quite up to the task of promoting types
involving unboxed tuples. Consider this example:

  swapperino :: (# a, b #) -&gt; (# b, a #)

What would this look like when promoted? Presumably, it would have a kind
signature like this:

  type Swapperino :: (# a, b #) -&gt; (# b, a #)

Surprisingly, this won't kindcheck:

  error:
      &#8226; Expecting a lifted type, but &#8216;(# a, b #)&#8217; is unlifted
      &#8226; In a standalone kind signature for &#8216;Swapperino&#8217;:
          (# a, b #) -&gt; (# b, a #)

Even though (-&gt;) is levity polymorphic, this levity polymorphism only kicks in
for types, not kinds. In other words, the (-&gt;) in the kind of Swapperino is
completely levity monomorphic and only accepts Type-kinded arguments. This
oddity is tracked upstream as GHC#14180. Until that is fixed, there is no hope
of using promoted unboxed tuples freely in kinds.

However, we don't have to give up quite yet. As a crude-but-effective
workaround, we can simply promote value-level unboxed tuples to type-level boxed
tuples. In other words, we would promote swapperino to this:

  type Swapperino :: (a, b) -&gt; (b, a)

This trick is enough to make many (but not all) uses of unboxed tuples
Just Work&#8482; when promoted. We use a similar trick when singling unboxed tuples
as well.
-}</span><span>
</span><span id="line-344"></span></pre></body></html>